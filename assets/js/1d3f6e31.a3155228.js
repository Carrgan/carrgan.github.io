"use strict";(self.webpackChunkcarrgan_io=self.webpackChunkcarrgan_io||[]).push([[9028],{1692:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>l,frontMatter:()=>o,metadata:()=>p,toc:()=>c});var s=t(4848),r=t(8453);const o={},d="Next.Js Pages Router",p={id:"nextjs/pages-router",title:"Next.Js Pages Router",description:"NextJs \u7684 pages \u6587\u4ef6\u5939\u76f8\u6bd4\u4e8e app \u6587\u4ef6\u5939\u6765\u8bf4\u76f8\u5bf9\u7b80\u5355\u3002",source:"@site/notes/nextjs/pages-router.md",sourceDirName:"nextjs",slug:"/nextjs/pages-router",permalink:"/notes/nextjs/pages-router",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Next Js",permalink:"/notes/nextjs/"},next:{title:"\u901a\u4fd7\u89e3\u91ca\u662f\u4ec0\u4e48\u662f\u7ebf\u6027\u4ee3\u6570",permalink:"/notes/linear-algebra/what"}},i={},c=[{value:"\u8def\u7531",id:"\u8def\u7531",level:2},{value:"\u52a8\u6001\u8def\u7531",id:"\u52a8\u6001\u8def\u7531",level:3},{value:"Custom App",id:"custom-app",level:2},{value:"Custom Error",id:"custom-error",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"nextjs-pages-router",children:"Next.Js Pages Router"}),"\n",(0,s.jsx)(n.p,{children:"NextJs \u7684 pages \u6587\u4ef6\u5939\u76f8\u6bd4\u4e8e app \u6587\u4ef6\u5939\u6765\u8bf4\u76f8\u5bf9\u7b80\u5355\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5148\u6765\u770b\u76ee\u5f55\u7ed3\u6784\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"img.png",src:t(2036).A+"",width:"215",height:"200"})}),"\n",(0,s.jsx)(n.h2,{id:"\u8def\u7531",children:"\u8def\u7531"}),"\n",(0,s.jsxs)(n.p,{children:["pages \u6587\u4ef6\u5939\u6839\u76ee\u5f55\u5bf9\u5e94\u6839\u8def\u7531\uff0c\u6839\u76ee\u5f55\u91cc\u7684 index.tsx \u4f1a\u5bf9\u5e94\u5230\u8def\u7531 ",(0,s.jsx)(n.code,{children:"/"}),"\u3002\n\u91cc\u9762\u7684\u6bcf\u4e2a\u5b50\u6587\u4ef6\u5bf9\u5e94\u4e0b\u4e00\u7ea7\u8def\u7531\uff0c\u4f8b\u5982 ",(0,s.jsx)(n.code,{children:"dashboard"})," \u6587\u4ef6\u5939\u4e0b\u7684\u7ec4\u4ef6 ",(0,s.jsx)(n.code,{children:"index.tsx"})," \u5c31\u4f1a\u88ab\u6e32\u67d3\u5230\u8def\u7531\u7684 ",(0,s.jsx)(n.code,{children:"/dashboard"}),"\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u52a8\u6001\u8def\u7531",children:"\u52a8\u6001\u8def\u7531"}),"\n",(0,s.jsxs)(n.p,{children:["\u6211\u4eec\u53ef\u4ee5\u547d\u540d ",(0,s.jsx)(n.code,{children:"/blog/[id].tsx"})," \u6765\u63a5\u6536\u8def\u7531\u7684\u52a8\u6001\u53c2\u6570\u3002\u8fd9\u6837\u8def\u7531 ",(0,s.jsx)(n.code,{children:"/blog/1"}),", \u5728 ",(0,s.jsx)(n.code,{children:"[id].tsx"})," \u7ec4\u4ef6\u4e2d\u5c31\u80fd\u63a5\u6536\u5230 ",(0,s.jsx)(n.code,{children:"{ id: '1' }"}),"\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useRouter } from 'next/router'\n\nconst Blob = () => {\n  const router = useRouter()\n  return <p>Post: {router.query.id} </p>\n}\n\nexport default Blob;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5f53\u8ba9\u4f60\u53ef\u4ee5\u63a5\u4f4f\u5f88\u591a query \u53c2\u6570 ",(0,s.jsx)(n.code,{children:"[...id].tsx"})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"URL"}),(0,s.jsx)(n.th,{children:"Params"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"/blob/1/2/3"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ id: ['1', '2', '3'] }"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"/blob/1"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ id: ['1'] }"})})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["\u4e5f\u53ef\u8ba9 query \u53c2\u6570\u53ef\u9009 ",(0,s.jsx)(n.code,{children:"[[...id]].tsx"})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"URL"}),(0,s.jsx)(n.th,{children:"Params"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"/blob"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ id: undefined }"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"/blob/1"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ id: ['1'] }"})})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"custom-app",children:"Custom App"}),"\n",(0,s.jsxs)(n.p,{children:["\u4f5c\u4e3apage router\u91cc\u6700\u6709\u610f\u601d\u7684\u4e00\u4e2a\u7279\u6027 ",(0,s.jsx)(n.code,{children:"_app.tsx"}),"\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["Next.Js \u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"APP"})," \u7ec4\u4ef6\u6765\u521d\u59cb\u5316\u6bcf\u4e00\u4e2a page\uff0c\u6211\u4eec\u53ef\u4ee5\u91cd\u5199\u8fd9\u4e2a\u7ec4\u4ef6\uff01",(0,s.jsx)(n.strong,{children:"\u8fd9\u4e2a\u7ec4\u4ef6\u5168\u5c40\u53ea\u80fd\u6709\u4e00\u4e2a\u3002"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:"pages/_app.tsx",children:'import type { AppProps } from "next/app";\n\nconst LeanNextJsApp = ({ Component, pageProps }: AppProps) => {\n  return (\n    <>\n      <Component {...pageProps} />\n    </>)\n}\n\nexport default LeanNextJsApp\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u8fd9\u4e2a\u7ec4\u4ef6\u5c31\u6709\u610f\u601d\u4e86\uff0c\u4f5c\u4e3a\u6574\u4e2a\u5e94\u7528\u6700\u9876\u5c42\u7684\u7ec4\u4ef6\u3002\n\u6bcf\u6b21\u8def\u7531\u53d8\u5316\u7684\u65f6\u5019\uff0c\u8be5\u8def\u7531\u5bf9\u5e94\u7684 component \u5728\u88ab\u6e32\u67d3\u4e4b\u524d\uff0c\u90fd\u4f1a\u88ab\u4f20\u5165\u8fd9\u4e2a\u7ec4\u4ef6\u3002\u4e5f\u5c31\u610f\u5473\u7740\uff0c\u53ef\u4ee5\u63a7\u5236\u5ba3\u5e03\u6e32\u67d3\u8fd9\u4e2a\u7ec4\u4ef6\uff0c\u6216\u8005\u662f\u600e\u4e48\u6e32\u67d3\u8fd9\u4e2a\u7ec4\u4ef6\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u5728\u8fd9\u91cc\u6dfb\u52a0\u81ea\u5b9a\u4e49\u7684 ",(0,s.jsx)(n.code,{children:"<head>"})," ",(0,s.jsx)(n.code,{children:"<script>"})," \u5230 HTML \u91cc\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:"pages/_app.tsx",children:'import type { AppProps } from "next/app";\nimport Script from "next/script";\nimport Head from "next/head";\n\nconst LeanNextJsApp = ({ Component, pageProps }: AppProps) => {\n  return (\n    <>\n      <Head>\n        ...html header\n      </Head>\n      <Script>\n        ...script\n      <\/Script>\n      <Component {...pageProps} />\n    </>)\n}\n\nexport default LeanNextJsApp\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u7ec4\u4ef6\u7684 ",(0,s.jsx)(n.code,{children:"key"})," \u5c5e\u6027\uff0c\u6765\u51b3\u5b9a\u5bf9\u7ec4\u4ef6\u7684\u6e32\u67d3"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:"pages/_app.tsx",children:'import type { AppProps } from "next/app";\n\nexport type NextPageWithKey<P = {}, IP = P> = NextPage<P, IP> & {\n  key: string\n}\n\ntype AppPropsWithKey = AppProps & { Component: NextPageWithKey }\n\nconst LeanNextJsApp = ({ Component, pageProps }: AppPropsWithKey) => {\n\n  // ...Get valied root key from api\n  if (!Component?.name || !valiedKey.include(Component.key)) {\n    return <NotFound />\n  }\n  return (\n    <>\n      <Component {...pageProps} />\n    </>)\n}\n\nexport default LeanNextJsApp\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:"pages/other-pages.tsx",children:'import type { NextPageWithKey } from "@/pages/_app";\n\nconst BlobA: NextPageWithKey = () => {\n  return <div>Blob A</div>\n}\n\nBlobA.key = "blobA"\n\nexport default BlobA\n'})}),"\n",(0,s.jsx)(n.h2,{id:"custom-error",children:"Custom Error"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:"pages/404.js",children:"export default function Custom404() {\n  return <h1>404 - Page Not Found</h1>\n}\n"})})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},2036:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/pages-folder-451c37791d6584c1f071646434d21e2f.png"},8453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>p});var s=t(6540);const r={},o=s.createContext(r);function d(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function p(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);