<!doctype html>
<html lang="zh-cn" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<title data-react-helmet="true">MongoDB | Carrgan Universe</title><meta data-react-helmet="true" property="og:url" content="https://carrgan.github.io/notes/Database/MongoDB"><meta data-react-helmet="true" name="docusaurus_locale" content="zh-cn"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="MongoDB | Carrgan Universe"><meta data-react-helmet="true" name="description" content="安装"><meta data-react-helmet="true" property="og:description" content="安装"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.svg"><link data-react-helmet="true" rel="canonical" href="https://carrgan.github.io/notes/Database/MongoDB"><link data-react-helmet="true" rel="alternate" href="https://carrgan.github.io/en/notes/Database/MongoDB" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://carrgan.github.io/notes/Database/MongoDB" hreflang="zh-cn"><link data-react-helmet="true" rel="alternate" href="https://carrgan.github.io/notes/Database/MongoDB" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.46332caf.css">
<link rel="preload" href="/assets/js/runtime~main.522251aa.js" as="script">
<link rel="preload" href="/assets/js/main.1f385e94.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Carrgan Universe</b></a><a class="navbar__item navbar__link navbar__link--active" href="/notes/intro">Notes</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>中文（中国）</span></span></a><ul class="dropdown__menu"><li><a href="/en/notes/Database/MongoDB" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/notes/Database/MongoDB" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">中文（中国）</a></li></ul></div><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Carrgan Universe</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/notes/intro">Notes</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/en/notes/Database/MongoDB" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/notes/Database/MongoDB" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">中文（中国）</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/intro">简介</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Python</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Python/base">Python基础</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Python/name-space">命名空间</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Python/Tips-for-function">函数定义小贴士</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Python/generator">生成器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Python/module">模块</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Python/opp">OPP 宏伟蓝图</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Python/magic-function">运算符重载</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Python/regular">正则</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Python/logging">何时使用Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Python/typing">类型提示</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Python/request">request</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Python/other">其他</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Linux</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Linux/Selinux">Selinux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Linux/Crontab">Crontab</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Linux/SSH">SSH</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/notes/Linux/system-server">认识系统服务</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Database</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/notes/Database/MongoDB">MongoDB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/Database/redis">Redis</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/notes/git-command">git命令速查</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">MongoDB</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="安装"></a>安装<a class="hash-link" href="#安装" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="macos"></a>MacOS<a class="hash-link" href="#macos" title="Direct link to heading">#</a></h3><ul><li><p>brew本来不能安装</p></li><li><p>这是用于官方MongoDB软件的自定义HomebrewTap</p></li><li><p>使用以下命令在MacOS终端会话中添加自定义Tap:</p><p>  <code>brew tap mongodb/brew</code></p></li><li><p>可正常安装</p><p>  <code>brew install mongodb-community@4.2</code></p></li></ul><p>如果安装了旧版本报错</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">删除后重新安装</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `brew untap mongodb/brew &amp;&amp; brew tap mongodb/brew`</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `brew install mongodb-community@4.2`</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>除了二进制文件之外，安装还创建了：</p><ul><li>the configuration file (/usr/local/etc/mongod.conf)</li><li>the log directory path (/usr/local/var/log/mongodb)</li><li>the data directory path (/usr/local/var/mongodb)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="运行mongodb社区版"></a>运行MongoDB社区版<a class="hash-link" href="#运行mongodb社区版" title="Direct link to heading">#</a></h2><ul><li><p>要将MongoDB（即mongod进程）作为macOS服务运行，请发出以下命令</p><p>  <code>brew services start mongodb-community@4.2</code></p></li><li><p>要将MongoDB 作为后台进程手动运行，请发出以下命令：</p><p>  <code>mongod --config /usr/local/etc/mongod.conf --fork</code></p></li></ul><p>两种方法都使用/usr/local/etc/mongod.conf在安装过程中创建的文件。您也可以将自己的MongoDB 配置选项添加到此文件中。</p><ul><li><p>要验证MongoDB是否正在运行，请mongod在正在运行的进程中进行搜索</p><p>  <code>ps aux | grep -v grep | grep mongod</code></p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="维修"></a>维修<a class="hash-link" href="#维修" title="Direct link to heading">#</a></h2><ul><li><p>删除下载的.tgz档案</p><p>  <code>brew untap mongodb/brew &amp;&amp; brew tap mongodb/brew</code></p></li><li><p>重试安装</p><p>  <code>brew install mongodb-community@4.2</code></p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="mongodb使用"></a>MongoDB使用<a class="hash-link" href="#mongodb使用" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="基础命令"></a>基础命令<a class="hash-link" href="#基础命令" title="Direct link to heading">#</a></h3><ul><li><p>查看当前的数据库：</p><p>  <code>db</code></p></li><li><p>查看所有的数据库：</p><p>  <code>show dbs/show databases</code></p></li><li><p>切換数据库：</p><p>  <code>use db_name</code></p></li><li><p>删除当前的数据库：</p><p>  <code>db.dropDatabase()</code></p></li><li><p>不用手动创建数据库
-直接添加就会生成数据库了</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="关于集合"></a>关于集合<a class="hash-link" href="#关于集合" title="Direct link to heading">#</a></h3><p>集合就是mysql的表了</p><ul><li><p>不手动创建集合</p><p>  向不存在的集合中第一次加入数据时，集合会被创建出来</p></li><li><p>手动创建结合</p><p>  <code>db.createCollection(name, options)</code></p><p>  <code>db.createCollection (&quot;stu&quot;)</code></p><p>  <code>db.createCollection (&quot;sub&quot;, {capped: true, size: 10})</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - 参数 capped：认值为 false 表示不设置上限，值为 true 表示设置上限</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - 参数 size：当 capped 值为 true 时，需要指定此参数，表示上限大小，当文档达到上限时，会将之前的数据覆盖，单位为字节</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>查看集合：</p><p>  <code>show collections</code></p></li><li><p>删除集合：</p><p>  <code>db.集合名称.drop ()</code>
</p></li><li><p>更改集合名称</p><p> `adminCommand({renameColleciton: &quot;db.col1&quot;, to: &quot;db.col2&quot;})</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="数据类型"></a>数据类型<a class="hash-link" href="#数据类型" title="Direct link to heading">#</a></h2><p>Object ID：文档 ID （文档将要存入数据库的一个个的字典）
String：字符串，最常用，必须是有效的 UTF-8
Boolean：存储一个布尔值，true 或 false 必须小写
Integer：整数可以是 32 位或 64 位，这取決于服务器
Double：存储浮点值
Arrays：数组或列表，多个值存储到一个键
Object：用于嵌入式的文档，即一个值为一个文档可以储存另一个集合
Nul：存储 Nu 山值
Timestamp：时间戳，表示从 1970-1-1 到现在的总秒数
Date：存储当前日期或时间的 UNX 时间格式</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="注意点"></a>注意点<a class="hash-link" href="#注意点" title="Direct link to heading">#</a></h2><ul><li>创建日期语句如下：参数的格式为 YYYY-MM-DD new Date (2017-12-20)</li><li>每个文档都有一个属性，为_id，保证每个文档的唯一性</li><li>可以自己去设置 id 插入文档，如果没有提供，那么 Mongodb 为每个文档提供了一个独特的_id，类型为 objectId</li><li>objectId 是一个 12 字节的十六进制数：<ul><li>前 4 个字节为当前 时间戳</li><li>接下来 3 个字节的 机器 ID</li><li>接下来的 2 个字节中 Mongodbe 的服务进程 id    </li><li>最后 3 个字节是 简单的增量值</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="插入保存"></a>插入&amp;保存<a class="hash-link" href="#插入保存" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="插入"></a>插入<a class="hash-link" href="#插入" title="Direct link to heading">#</a></h3><p><code>db.集合名称.insert(document)</code></p><p><code>db.stu.insert({name: &#x27;gi&#x27;,gender: 1})</code></p><p><code>db.stu.insert({\_id: &quot;20170101, name: &#x27;gi&#x27;, gender: 1)</code></p><p>插入文档时，如果不指定_id 参数，Mongodb 会为文档分配一个唯一的 ObjectId</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="保存"></a>保存<a class="hash-link" href="#保存" title="Direct link to heading">#</a></h3><p><code>db.集合名称.save(document)</code></p><p>如果文档的 <code>_id</code> 已经存在则修改，如果文档的 <code>_id</code> 不存在则添加 Mongodb 插入数据</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="对比"></a>对比<a class="hash-link" href="#对比" title="Direct link to heading">#</a></h2><ul><li><code>db.collecion.insert({})</code> 插入数据，<code>_id</code> 存在就报错</li><li><code>db.collection.save({})</code>   插入数据，<code>_id</code></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="查询"></a>查询<a class="hash-link" href="#查询" title="Direct link to heading">#</a></h2><p><code>db.集合名称.find({条件文档})</code></p><p><code>db.集合名称.findOne({条件文档})</code> 查一条</p><p><code>db.集合名称.find({条件文档}).prett()</code> 格式化结果</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="更新"></a>更新<a class="hash-link" href="#更新" title="Direct link to heading">#</a></h2><p><strong>不加<code>$set:</code>会变为替换整个</strong></p><p><code>db.集合名称.update({&lt;query&gt;, &lt;update&gt;, multi:&lt;boolean&gt;})</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">query：查询条件参数</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">update：更新操作符</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">multi：可选，默认是 false，表示只更新找到的第一条记录，值为 true 表示把满足条件的文档全部更新        </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>db.test1000.update({name: &quot;xiaowang&quot;)}, {name: &quot;xiaozhao&quot;})</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">name 为 xiaowan 的数据替换为{name: &quot;xiaozhao&quot;}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>db.test1000.update({name: &quot;xiaowang&quot;}, {$set:{name: &quot;xiaozhao&quot;}})</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">把 name 为 xiaowang 的数据 name 的值更新为 xiaozhang</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>db.test1000.update({name: &quot;xiaowang&quot;}, {$set:{name: &quot;xiaozhao&quot;}} ,{multi: true})</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> {multi: true}达到更新多条的目的</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>注意：&quot;multi update only works with \$ operators&quot;</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="删除"></a>删除<a class="hash-link" href="#删除" title="Direct link to heading">#</a></h2><p><code>db.集合名称.remove(&lt;query&gt;,{justOne: &lt;boolean&gt;})</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">参数 query：可选，删除的文档的条件</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">参数 justOne：可选，如果设为 true 或 1, 则只删除一条，默认 false，表示删除多条</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="比较运算符"></a>比较运算符<a class="hash-link" href="#比较运算符" title="Direct link to heading">#</a></h2><ul><li>等于：默认是等于判断，没有运算符</li><li>小于：<code>$lt</code> (less than)</li><li>小于等于：<code>$ltb</code> (less than equa）</li><li>大于：<code>$gt</code> (greater than)</li><li>大于等于：<code>$gte</code></li><li>不等于：<code>$ne</code></li></ul><p><code>db.stu.find({age: {$gte: 18}})</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="范围运算符"></a>范围运算符<a class="hash-link" href="#范围运算符" title="Direct link to heading">#</a></h2><p>使用<code>$in</code>, <code>$nin</code>判断是否在某个范围内查询</p><p>查询年龄为 18、28、38 的学生</p><p><code>db.stu.find({age: {$in:[18, 28, 38]}})</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="逻辑运算符"></a>逻辑运算符<a class="hash-link" href="#逻辑运算符" title="Direct link to heading">#</a></h2><p>And：在 json 中写多个条件即可
查询年龄大于或等于 18, 并且性别为 true 的学生</p><p><code>db.stu.find({age: {$gte: 18}}, {gender: true})</code></p><p>Or: 使用<code>$or</code>，值为数组，数组中每个元素为 json
查询年龄大于 18, 或性别为 false 的学生</p><p><code>db.stu.find({$or: [age: {$gte: 18}, {gender: flase}]})</code></p><p>查询年龄大于 18 或性别为男生，并且姓名是郭靖</p><p><code>db.stu.find({$or:[{age: {$gte: 18}},{gender: true}],{name: &#x27;gj&#x27;}})</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="支持正则表达式"></a>支持正则表达式<a class="hash-link" href="#支持正则表达式" title="Direct link to heading">#</a></h2><p>使用<code>//</code>或<code>$regex</code> 编写正则表达式</p><p>abc开头，789结尾</p><p><code>db.products.find({sku: /^abc/})</code></p><p><code>db.products.find ({sku: {$regex: &#x27;789$&#x27;})</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="limit-和-skip"></a>Limit 和 skip<a class="hash-link" href="#limit-和-skip" title="Direct link to heading">#</a></h2><ul><li><p>方法 limit (）：</p><p>  用于读取指定数量的文档</p><p>  <code>db.集合名称.find().limit(NUMBER）</code></p><p>  查询 2 条学生信息</p><p>  <code>db.stu.find().limit(2)</code></p></li><li><p>方法 skip (）：</p><p>  用于跳过指定数量的文档</p><p>  <code>db.集合名称.find.skip(NUMBER)</code></p><p>  <code>db.stu.find().skip(2)</code></p></li><li><p>同时使用</p><p>  <code>db.集合名称.find.limit(NUMBER).skip(NUMBER)</code></p><p>  <code>db.集合名称.find.skip(NUMBER).limit(NUMBER)</code> 推荐</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="自定义查询"></a>自定义查询*<a class="hash-link" href="#自定义查询" title="Direct link to heading">#</a></h2><p>使用<code>$ where</code> 后面写一个函数，返回满足条件的数据</p><p>查询年龄大于 30 的学生</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">db.stu.find ({</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   $where: function(){</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return this age &gt; 30;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        })</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="投影"></a>投影<a class="hash-link" href="#投影" title="Direct link to heading">#</a></h2><p>在查询到的返回结果中，只选择必要的字段</p><p><code>db.集合名称.find({}, {字段名称：1, ...]}</code></p><p>参数为字段与值，值为 1 表示显示，值为 0 不显</p><p>特殊：对于_id 列默认是显示的，如果不显示需要明确设置为 0</p><p><code>db.stu.find({},{_id: 0, name: 1, gender: 1})</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="排序"></a>排序<a class="hash-link" href="#排序" title="Direct link to heading">#</a></h2><p>方法 sort (），用于对集进行排序</p><p><code>db.集合名称.find().sort({字段：1})</code></p><p>参数 1 为升序排列</p><p>参数-1 为降序排列</p><p>根据性别降序，再根据年龄升序</p><p><code>db.stu.find().sort({gender: -1, age: 1})</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="统计个数"></a>统计个数<a class="hash-link" href="#统计个数" title="Direct link to heading">#</a></h2><p>方法 count（）用于统计结果集中文档条数</p><p><code>db.集合名称.find.({条件}).count()</code></p><p><code>db.集合名称.count({条件})</code></p><p><code>db.stu.find.({gender: true}).count()</code></p><p><code>db.stu.count({age: {$gt: 20}, gender: true})</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="数据的备份和恢复"></a>数据的备份和恢复<a class="hash-link" href="#数据的备份和恢复" title="Direct link to heading">#</a></h2><p>备份的语法:</p><p>  <code>mongodump -h dbhost -d dbname -o dbdirectory</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -h: 服务器地址，也可以指定端口号</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -d: 需要备份的数据库名称</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -o: 备份的数据存放位置，此目录中存放着备份出来的数据</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>在本地只用<code>-o</code>就行了</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="数据的恢复"></a>数据的恢复<a class="hash-link" href="#数据的恢复" title="Direct link to heading">#</a></h2><p>恢复语法：</p><p>  <code>mongorestore -h dbhost -d dbname --dir dbdirectory</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">-h: 服务器地址</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-d: 需要恢复的数据库实例</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--dir: 备份数据所在位置</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="聚合-aggregate"></a>聚合 aggregate<a class="hash-link" href="#聚合-aggregate" title="Direct link to heading">#</a></h2><p>聚合（aggregate）是基于数据处理的聚合管道，每个文档通过一个由多个阶段(stage）组成的管道，可以对每个阶段的管道进行分组、过滤等功能，然后经过一系列的处理，输出相应的结果。</p><p><code>db.集合名称.aggregate({管道：{表达式}})</code></p><p>第一阶个<code>{}</code>里的内容通过管道传给第二个<code>{}</code>使用</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="常用管道"></a>常用管道<a class="hash-link" href="#常用管道" title="Direct link to heading">#</a></h2><p>在 mongodbe 中，文档处理完毕后，通过管道进行下一次处理常用管道如下：</p><ul><li><p><code>$group</code>：将集合中的文档分组，可用于统计结果</p></li><li><p><code>$match</code>：过滤数据，只输出符合条件的文档</p></li><li><p><code>$project</code>：修改输入文档的结构，如重命名、增加、删除字段、创建计算结果</p></li><li><p><code>$sort</code>：将输入文档排序后输出<code>{$sort:{age:1}}</code></p></li><li><p><code>$limit</code>：限制聚合管道返回的文档数</p></li><li><p><code>$skip</code>：跳过指定数量的文档，并返回余下的文档</p></li><li><p><code>$unwind</code>：将数组类型的字段进行拆分</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">db.t2.insert({_id:1, item:&#x27;t-shirt&#x27;, size: [&#x27;S&#x27;, &#x27;M&#x27;, &#x27;L&#x27;]})</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">db.t2.insert({_id:2, item:&#x27;t-shirt&#x27;})</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">db.t2.aggregate(</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    $unwind: &#x27;$size&#x27;,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    PreserveNullandEmptyArrays: true #防止数据丢失即使有空也会保留</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#结果</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{_id:1, item:&#x27;t-shirt&#x27;, size: &#x27;S&#x27;}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{_id:1, item:&#x27;t-shirt&#x27;, size: &#x27;M&#x27;}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{_id:1, item:&#x27;t-shirt&#x27;, size: &#x27;L&#x27;}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{_id:2, item:&#x27;t-shirt&#x27;}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="表达式"></a>表达式<a class="hash-link" href="#表达式" title="Direct link to heading">#</a></h2><p>处理输入文档并输出</p><p>语法：<code>表达式：&#x27;$列名常用表达式&#x27;</code></p><ul><li><code>$sum</code>：计算总和，<code>$sum:1</code>表示以一倍计数</li><li><code>$avg</code>：计算平均值</li><li><code>$min</code>：获取最小值</li><li><code>$max</code>：获取最大值</li><li><code>$push</code>：在结果文档中插入值到一个数组中</li><li><code>$first</code>：根据资源文档的排序获取第一个文档数据</li><li><code>$last</code>：根据资源文档的排序获取最后一个文档数据</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="group的注意事项"></a><code>$group</code>的注意事项<a class="hash-link" href="#group的注意事项" title="Direct link to heading">#</a></h2><ul><li><code>$group</code>对应的字典有几个键，结果中就有几个键</li><li>每个分组都要有一个独特的分子依据<code>_id</code></li><li>取不同字段的值需要使用<code>$</code>，<code>{name: $name}</code></li><li>取字典嵌套字典中的值时(取上层字典中的值)<code>$_id.name</code></li><li>能够同时按照多个键进行分组，对全部键进行分组可以去重
<code>{$group: {_id: {name: &#x27;$name&#x27;}, {age: &#x27;$age&#x27;}}}</code><ul><li>结果:<code>{_id: {name: &#x27;&#x27;, age: &#x27;&#x27;}}</code></li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="聚合实例"></a>聚合实例<a class="hash-link" href="#聚合实例" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly MongoDB"><pre tabindex="0" class="prism-code language-MongoDB codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 按照gender进行分组，获取不同组数据的个数和平均值</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">db.stu.aggregate(</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$group: {_id: &#x27;$gender&#x27;, count: {$sum: 1}, avg_age:{$avg: &#x27;$age&#x27;}}},</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$project:{gender:&#x27;$_id&#x27;, count:1, avg_age: 1}} # 格式化输出</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  )</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 按照hometown进行分组，获取不同组的平均年龄</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">db.stu.aggregate(</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$group: {_id:&#x27;$hometown&#x27;, avg_age: {$avg: &#x27;$age&#x27;}}}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  )</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 使用$group统计整个文档,并计算平均年龄</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">db.stu.aggregate(</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$group: {_id:null, count: {$sum:1}, avg_age: {$avg: &#x27;$age&#x27;}}}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  )</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 选择年龄大于20的或家乡在蒙古或大理的学生的男女数量</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">db.stu.aggregate{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$match: {$or: [{age: {$gt: 20}}, hometown: {$in: [&#x27;蒙古&#x27;,&#x27;大理&#x27;]}]}  # 相当于find()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$group: {_id: &#x27;$gender&#x27;, count: {$sum:1}}}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$project: {gender: &#x27;$_id.gender&#x27;, count:1, _id:0}}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 一下集合有country, province ,userid三个件</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">db.test.aggregate{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$group:{_id:{country: &#x27;$country&#x27;, province: &#x27;$province&#x27;, userid:&#x27;$userid&#x27;}}}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$group:{_id:{country: &#x27;$_id.country&#x27;, province:&#x27;$_id.province&#x27;},count:{$sum:1}}} # 以country和province进行分组</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$project:{_id:0, count:1, country:1, province: 1}}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># unwind求alex下tag中的数据个数</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{username: &#x27;alex&#x27;, tag: [&#x27;C#&#x27;, &#x27;Java&#x27;, &#x27;Python&#x27; ]}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">db.test.aggregate(</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$match:{username: &#x27;alex&#x27;}},</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$unwind: &#x27;$tag&#x27;},</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {$group: {_id: null, sum: {$sum:1}}}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  )</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/notes/Linux/system-server"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 认识系统服务</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/notes/Database/redis"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Redis »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#安装" class="table-of-contents__link">安装</a><ul><li><a href="#macos" class="table-of-contents__link">MacOS</a></li></ul></li><li><a href="#运行mongodb社区版" class="table-of-contents__link">运行MongoDB社区版</a></li><li><a href="#维修" class="table-of-contents__link">维修</a></li><li><a href="#mongodb使用" class="table-of-contents__link">MongoDB使用</a><ul><li><a href="#基础命令" class="table-of-contents__link">基础命令</a></li><li><a href="#关于集合" class="table-of-contents__link">关于集合</a></li></ul></li><li><a href="#数据类型" class="table-of-contents__link">数据类型</a></li><li><a href="#注意点" class="table-of-contents__link">注意点</a></li><li><a href="#插入保存" class="table-of-contents__link">插入&amp;保存</a><ul><li><a href="#插入" class="table-of-contents__link">插入</a></li><li><a href="#保存" class="table-of-contents__link">保存</a></li></ul></li><li><a href="#对比" class="table-of-contents__link">对比</a></li><li><a href="#查询" class="table-of-contents__link">查询</a></li><li><a href="#更新" class="table-of-contents__link">更新</a></li><li><a href="#删除" class="table-of-contents__link">删除</a></li><li><a href="#比较运算符" class="table-of-contents__link">比较运算符</a></li><li><a href="#范围运算符" class="table-of-contents__link">范围运算符</a></li><li><a href="#逻辑运算符" class="table-of-contents__link">逻辑运算符</a></li><li><a href="#支持正则表达式" class="table-of-contents__link">支持正则表达式</a></li><li><a href="#limit-和-skip" class="table-of-contents__link">Limit 和 skip</a></li><li><a href="#自定义查询" class="table-of-contents__link">自定义查询*</a></li><li><a href="#投影" class="table-of-contents__link">投影</a></li><li><a href="#排序" class="table-of-contents__link">排序</a></li><li><a href="#统计个数" class="table-of-contents__link">统计个数</a></li><li><a href="#数据的备份和恢复" class="table-of-contents__link">数据的备份和恢复</a></li><li><a href="#数据的恢复" class="table-of-contents__link">数据的恢复</a></li><li><a href="#聚合-aggregate" class="table-of-contents__link">聚合 aggregate</a></li><li><a href="#常用管道" class="table-of-contents__link">常用管道</a></li><li><a href="#表达式" class="table-of-contents__link">表达式</a></li><li><a href="#group的注意事项" class="table-of-contents__link"><code>$group</code>的注意事项</a></li><li><a href="#聚合实例" class="table-of-contents__link">聚合实例</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Notes</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/notes/intro">Notes</a></li></ul></div><div class="col footer__col"><div class="footer__title">社交</div><ul class="footer__items"><li class="footer__item"><a href="https://weibo.com/u/3602696930?nick=Carrgan" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>微博<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://music.163.com/#/artist?id=12236222" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>网易云音乐<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://space.bilibili.com/72913460" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>bilibili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.csdn.net/Carrgan?spm=1000.2115.3001.5343" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CSDN<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Carrgan Universe, Inc. Built with Docusaurus react-three/fiber.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.522251aa.js"></script>
<script src="/assets/js/main.1f385e94.js"></script>
</body>
</html>